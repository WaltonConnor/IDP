<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDP Front End</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="fullbox" id="TitleBox">SQL Database</div>
    <div class="fullbox" id="InformationBox">Please use the boxes below to select the table you wold like to search, as well as any details you would like to filter by.</div>

    <div class="fullbox" id="filtercontrols">
        <form>
            <!-- Initial selection for filtering data -->
            <label for="tablefilter">Choose a table to retrieve data from:</label>
            <select id="tablefilter" class="filterbox" name="tablefilter" onchange="tableCheck()">
                <option selected disabled>Choose a selection:</option>
                <option id="patientselect" value="Patient">Patient</option>
                <option id="locationselect" value="Location">Location</option>
                <option id="appointmentselect" value="Appointments">Appointments</option>
            </select>
            <br></br>
            <!-- Filter boxes for patient selection -->
            <label id="sexfilterlabel" for="sexfilter" style="display: none;">Choose a sex to filter the data: </label>
            <select id="sexfilter" class="filterbox" name="sex filter" style="display: none;">
                <option selected disabled>Choose a sex:</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
            </select>
            <br></br>
            <label id="allergyfilterlabel" for="allergyfilter" style="display: none;">Choose an allergy to filter the data: </label>
            <select id="allergyfilter" class="filterbox" name="allergyfilter" style="display: none;">
                <option selected disabled>Choose an allergy:</option>
                <option value="Animals">Animals</option>
                <option value="Food">Food</option>
                <option value="Hay Fever">Hay Fever</option>
                <option value="Dust">Dust</option>
                <option value="Other">Other</option>
            </select>
            <br></br>
            <!-- Filter box for location selection -->
            <label id="locationtypefilterlabel" for="locationtypefilter" style="display: none;">Choose the type of location to filter the data: </label>
            <select id="locationtypefilter" class="filterbox" name="locationtype filter" style="display: none;">
                <option selected disabled>Choose a location type:</option>
                <option value="Clinic">Clinic</option>
                <option value="Hospital">Hospital</option>
                <option value="Pharmacy">Pharmacy</option>
            </select>
            <br></br>
            <!-- Filter boxes for appointment selection -->
            <label id="appointmentlocationfilterlabel" for="appointmentlocationfilter" style="display: none;">Choose the appointment location to filter the data: </label>
            <select id="appointmentlocationfilter" class="filterbox" name="appointmentlocation filter" style="display: none;">
                <option selected disabled>Choose a location:</option>
                <option value="1">1 - Hawthorn Health Center</option>
                <option value="2">2 - Prairie Rose Family Practice</option>
                <option value="3">3 - Sunnyvale Medical Clinic</option>
                <option value="4">4 - Mapleleaf Family Practice</option>
                <option value="5">5 - Lakeview Regional Hospital</option>
                <option value="6">6 - Harborview Regional Hospital</option>
                <option value="7">7 - Cypress Grove Clinic</option>
                <option value="8">8 - Seaview Memorial Hospital</option>
                <option value="9">9 - Seaview Memorial Hospital</option>
                <option value="10">10 - Riverbend Regional Hospital</option>
                <option value="11">11 - Mountainview Medical Clinic</option>
                <option value="12">12 - Aspen Grove Medical Center</option>
            </select>
            <br></br>

            <input class="SubmitButton" type="button" onclick="filterData()" value="Submit">
        </form>
    </div>

    <div>
        <button id="get" onclick="search()">Get</button>
    </div>

    <script>
        function tableCheck() {
            if (document.getElementById("patientselect").selected) {
                document.getElementById("locationtypefilterlabel").style.display = "none";
                document.getElementById("locationtypefilter").style.display = "none";
                // document.getElementById("locationtypefilter").disabled = true;
                document.getElementById("appointmentlocationfilterlabel").style.display = "none";
                document.getElementById("appointmentlocationfilter").style.display = "none";
                // document.getElementById("appointmentlocationfilter").disabled = true;

                document.getElementById("allergyfilterlabel").style.display = "block";
                document.getElementById("allergyfilter").style.display = "block";
                // document.getElementById("allergyfilter").disabled = false;
                document.getElementById("sexfilterlabel").style.display = "block";
                document.getElementById("sexfilter").style.display = "block";
                // document.getElementById("sexfilter").disabled = false;
            } else if (document.getElementById("locationselect").selected) {
                document.getElementById("allergyfilterlabel").style.display = "none";
                document.getElementById("allergyfilter").style.display = "none";
                // document.getElementById("allergyfilter").disabled = true;
                document.getElementById("sexfilterlabel").style.display = "none";
                document.getElementById("sexfilter").style.display = "none";
                // document.getElementById("sexfilter").disabled = true;
                document.getElementById("appointmentlocationfilterlabel").style.display = "none";
                document.getElementById("appointmentlocationfilter").style.display = "none";
                // document.getElementById("appointmentlocationfilter").disabled = true;
                
                document.getElementById("locationtypefilterlabel").style.display = "block";
                document.getElementById("locationtypefilter").style.display = "block";
                // document.getElementById("locationtypefilter").disabled = false;
            } else if (document.getElementById("appointmentselect").selected){
                document.getElementById("allergyfilterlabel").style.display = "none";
                document.getElementById("allergyfilter").style.display = "none";
                // document.getElementById("allergyfilter").disabled = true;
                document.getElementById("sexfilterlabel").style.display = "none";
                document.getElementById("sexfilter").style.display = "none";
                // document.getElementById("sexfilter").disabled = true;
                document.getElementById("locationtypefilterlabel").style.display = "none";
                document.getElementById("locationtypefilter").style.display = "none";
                // document.getElementById("locationtypefilter").disabled = true;

                document.getElementById("appointmentlocationfilterlabel").style.display = "block";
                document.getElementById("appointmentlocationfilter").style.display = "block";
                // document.getElementById("appointmentlocationfilter").disabled = false;
            }
        }
    </script>
    <script>
        function filterData(){
            var sel = document.getElementsByClassName('filterbox');
            if (option == ''){
                console.log("filter is empty");
            }else{
                var option = sel.options[sel.selectedIndex].value;
                console.log(option);
            }
        }
    </script>

    <script>
        async function search() {
        const id = 1;
        const endpoint = `/data-api/rest/Patient/Patient_ID`;
        const response = await fetch(`${endpoint}/${id}`);
        const result = await response.json();
        console.table(result.value);
        }
    </script> 
</body>
</html>